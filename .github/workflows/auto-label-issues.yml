name: Auto-label Issues
on:
  issues:
    types: [opened]

permissions:
  issues: write

jobs:
  auto-label:
    runs-on: ubuntu-24.04
    steps:
      - name: Label by author
        run: |
          AUTHOR="${{ github.event.issue.user.login }}"
          ISSUE="${{ github.event.issue.number }}"

          if [ "$AUTHOR" = "TheSmuks" ]; then
            gh issue edit $ISSUE \
              --repo ${{ github.repository }} \
              --add-label safe
          else
            gh issue edit $ISSUE \
              --repo ${{ github.repository }} \
              --add-label pending-review
          fi
        env:
          GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}
